import{y as e,o as t,c as s,w as a,T as l,b as o,d as i,t as n,v as r,p as c,F as d,q as _,i as u,e as m,k as p,x as f,V as h,a7 as g,u as y,S as w,a as b,j as x,Y as k,$ as v,s as A,U as T,H as C,I,Z as E,r as P,M as G,R as M,A as R,a2 as z}from"./index.e3856387.js";import{_ as D}from"./wallet-list-popup.dc0d278d.js";import{r as j}from"./uni-app.es.039f777e.js";import{_ as F}from"./uni-popup.b6a30396.js";import{_ as J}from"./close.458bce50.js";import{_ as N}from"./right.af8a0f8e.js";import{_ as S}from"./ETH.9f110baa.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as H}from"./pin-popup.3870e030.js";import{A as Z}from"./app.39bb0535.js";import{W as V}from"./wallet.d7a37044.js";import{E as W,p as L,a as Y,f as U,U as Q,P as O}from"./etherApi.29d22b7c.js";import{g as X}from"./graceChecker.21ec0954.js";import"./md5.c7cedf05.js";import{T as K}from"./transaction.87575691.js";import{T as q}from"./token.bb23f639.js";import{_ as $}from"./expand.9dc4f4b7.js";import{_ as ee}from"./scan.703693e7.js";import"./import_wallet.27467dcb.js";import"./pin.5f0ee5b9.js";import"./pin-code-keyboard.d34bb241.js";import"./wallet.f064e6a3.js";import"./config.d9a5f6eb.js";const te=B({name:"choose-token",emits:["change"],props:{pop_title:{type:String,required:!0},wallet:{type:Object,default:[],required:!0},init_select:{type:String,required:!0}},data(){return{selected:this.init_select}},created(){},methods:{show(){this.$refs.token_list_popup.open("bottom")},change(e){this.selected=e,this.close(),this.$emit("change",{contract_address:e})},close(){this.$refs.token_list_popup.close()}}},[["render",function(p,f,h,g,y,w){const b=u,x=m,k=j(e("uni-popup"),F);return t(),s(b,{class:"tlp-token-list-popup"},{default:a((()=>[l(p.$slots,"default",{},void 0,!0),o(k,{ref:"token_list_popup"},{default:a((()=>[o(b,{class:"tlp-popup-container"},{default:a((()=>[o(b,{class:"tlp-popup-top-area"},{default:a((()=>[o(b),o(b,{class:"tlp-popup-title-area font-second-title"},{default:a((()=>[i(n(h.pop_title),1)])),_:1}),o(x,{class:"tlp-popup-close-area",mode:"widthFix",src:J,onClick:w.close},null,8,["onClick"])])),_:1}),o(b,{class:"tlp-popup-content-area"},{default:a((()=>[o(b,{class:"tlp-asset-item flex-row-space-between-center",onClick:f[0]||(f[0]=e=>w.change("ETH"))},{default:a((()=>[o(b,{class:"flex-row-start-center"},{default:a((()=>[o(b,{class:"tlp-checked-area flex-column-center-center"},{default:a((()=>["ETH"==y.selected?(t(),s(x,{key:0,class:"tlp-selected-icon",src:N})):r("",!0)])),_:1}),o(b,{class:"tlp-asset-name"},{default:a((()=>[o(x,{src:S}),o(b,{class:"tlp-asset-text font-third-title"},{default:a((()=>[i("ETH")])),_:1})])),_:1})])),_:1}),o(b,{class:"tlp-asset-bal"},{default:a((()=>[o(b,{class:"tlp-asset-bal-num font-third-title"},{default:a((()=>[i(n(h.wallet.balance),1)])),_:1}),o(b,{class:"tlp-asset-bal-worth font-desc-gray"},{default:a((()=>[i("$ "+n(h.wallet.usd_worth),1)])),_:1})])),_:1})])),_:1}),(t(!0),c(d,null,_(h.wallet.tokens,((e,l)=>(t(),s(b,{class:"tlp-asset-item flex-row-space-between-center",onClick:t=>w.change(e.contract_address)},{default:a((()=>[o(b,{class:"flex-row-start-center"},{default:a((()=>[o(b,{class:"tlp-checked-area flex-column-center-center"},{default:a((()=>[e.contract_address==y.selected?(t(),s(x,{key:0,class:"tlp-selected-icon",src:N})):r("",!0)])),_:2},1024),o(b,{class:"tlp-asset-name"},{default:a((()=>[o(b,{class:"tlp-token-default-icon flex-row-center-center"},{default:a((()=>[i(n(e.symbol[0]),1)])),_:2},1024),o(b,{class:"tlp-asset-text font-third-title"},{default:a((()=>[i(n(e.symbol),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(b,{class:"tlp-asset-bal"},{default:a((()=>[o(b,{class:"tlp-asset-bal-num font-third-title"},{default:a((()=>[i(n(e.balance),1)])),_:2},1024),o(b,{class:"tlp-asset-bal-worth font-desc-gray"},{default:a((()=>[i("$ "+n(e.usd_worth),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1},512)])),_:3})}],["__scopeId","data-v-2e2d9353"]]),se={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let ae;setTimeout((()=>{ae=p().platform}),16);const{t:le}=f(se);const oe=B({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:ae,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZV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"}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||le("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||le("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||le("uni-load-more.contentnomore")}},mounted(){},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(e,l,d,_,p,f){const w=m,b=u,x=y;return t(),s(b,{class:"uni-load-more",onClick:f.onClick},{default:a((()=>[!p.webviewHide&&("circle"===d.iconType||"auto"===d.iconType&&"android"===p.platform)&&"loading"===d.status&&d.showIcon?(t(),c("svg",{key:0,width:"24",height:"24",viewBox:"25 25 50 50",style:h({width:d.iconSize+"px",height:d.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-H5"},[g("circle",{cx:"50",cy:"50",r:"20",fill:"none",style:h({color:d.color}),"stroke-width":3},null,4)],4)):!p.webviewHide&&"loading"===d.status&&d.showIcon?(t(),s(b,{key:1,style:h({width:d.iconSize+"px",height:d.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},{default:a((()=>[o(w,{src:p.imgBase64,mode:"widthFix"},null,8,["src"])])),_:1},8,["style"])):r("",!0),d.showText?(t(),s(x,{key:2,class:"uni-load-more__text",style:h({color:d.color})},{default:a((()=>[i(n("more"===d.status?f.contentdownText:"loading"===d.status?f.contentrefreshText:f.contentnomoreText),1)])),_:1},8,["style"])):r("",!0)])),_:1},8,["onClick"])}],["__scopeId","data-v-d82f3750"]]);const ie=B({name:"UniSegmentedControl",emits:["clickItem"],props:{current:{type:Number,default:0},values:{type:Array,default:()=>[]},activeColor:{type:String,default:"#2979FF"},styleType:{type:String,default:"button"}},data:()=>({currentIndex:0}),watch:{current(e){e!==this.currentIndex&&(this.currentIndex=e)}},created(){this.currentIndex=this.current},methods:{_onClick(e){this.currentIndex!==e&&(this.currentIndex=e,this.$emit("clickItem",{currentIndex:e}))}}},[["render",function(e,l,r,m,p,f){const g=y,b=u;return t(),s(b,{class:w([["text"===r.styleType?"segmented-control--text":"segmented-control--button"],"segmented-control"]),style:h({borderColor:"text"===r.styleType?"":r.activeColor})},{default:a((()=>[(t(!0),c(d,null,_(r.values,((e,l)=>(t(),s(b,{class:w([["text"===r.styleType?"":"segmented-control__item--button",l===p.currentIndex&&"button"===r.styleType?"segmented-control__item--button--active":"",0===l&&"button"===r.styleType?"segmented-control__item--button--first":"",l===r.values.length-1&&"button"===r.styleType?"segmented-control__item--button--last":""],"segmented-control__item"]),key:l,style:h({backgroundColor:l===p.currentIndex&&"button"===r.styleType?r.activeColor:"",borderColor:l===p.currentIndex&&"text"===r.styleType||"button"===r.styleType?r.activeColor:"transparent"}),onClick:e=>f._onClick(l)},{default:a((()=>[o(b,null,{default:a((()=>[o(g,{style:h({color:l===p.currentIndex?"text"===r.styleType?r.activeColor:"#fff":"text"===r.styleType?"#000":r.activeColor}),class:w(["segmented-control__text","text"===r.styleType&&l===p.currentIndex?"segmented-control__item--text":""])},{default:a((()=>[i(n(e),1)])),_:2},1032,["style","class"])])),_:2},1024)])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["class","style"])}],["__scopeId","data-v-aa4ade3a"]]);const ne=B({data:()=>({ether_api:null,network_list:b().globalData.global_network_list,global_network_index:b().globalData.global_network_index,wallet_list:[],current_wallet:{address:"____________________________________",name:"______",keystore:"",balance:"_",usd_worth:"_",tokens:[]},current_network:{network:"__",url:"",color:"#f6f6f6",etherscan_api:""},to_address:"",selected_asset:{symbol:"ETH",balance:0},current_tab_index:0,tab_list:["Set priority","Customize"],gas_priority:[{level:"Fastest",max_fee:"_",time:"_ Min",cost_usd:"_",cost:"_",gas:"21000",eth_price:"0"},{level:"Standard",max_fee:"_",time:"_ Min",cost_usd:"_",cost:"_",gas:"21000",eth_price:"0"},{level:"Low",max_fee:"_",time:"_ Min",cost_usd:"_",cost:"_",gas:"21000",eth_price:"0"}],gas_price:0,gas_limit:0,current_priority_index:1,customize_set_max_fee:0,customize_max_priority_fee:0,customize_gas:21e3,gas_fee_usd:"_",gas_fee:"_",transfer_data:{},gas_status_tip:{contentdown:" ",contentrefresh:"Refreshing...",contentnomore:" "},gas_estimate_status:"more",refrush_timer:0,refrush_gas_countdown:0,refrush_gas_last_time:0,refrush_gas_gap:10,gas_fee_item_animation:{}}),onLoad(){if(Z.checkAppInit()){if(this.current_network=this.network_list[this.global_network_index],this.wallet_list=V.getWalletList(),!(this.wallet_list&&this.wallet_list instanceof Array&&0!=this.wallet_list.length))return x({title:"Data exception, please contact admin",showCancel:!1,confirmText:"Got it"}),void console.log("读取钱包列表异常");if(this.current_wallet=V.getDefaultWallet(),console.log(this.current_wallet),!this.current_wallet)return x({title:"Data exception, please contact admin",showCancel:!1,confirmText:"Got it"}),void console.log("读取钱包数据异常");this.refrush_timer=setInterval((()=>{if("loading"==this.gas_estimate_status)return;return(new Date).getTime()-this.refrush_gas_last_time>1e3*this.refrush_gas_gap?(this.gas_estimate_status="loading",void this.getGasInfo().then((e=>{this.gas_estimate_status="more",this.refrush_gas_last_time=(new Date).getTime()}),(e=>{console.log(e),this.refrush_gas_last_time=(new Date).getTime(),this.gas_estimate_status="more"}))):void 0}),1e3),k("select_book",(e=>{this.to_address=e.address,this.selected_asset=e.asset}))}},onUnload(){v("select_address"),clearInterval(this.refrush_timer)},onShow(){this.ether_api=new W.etherApi(this.network_list[this.global_network_index]),this.getBalance(),this.loadTokens()},methods:{showWalletListPop(){this.$refs.wallet_list_pop.show()},changeWallet(e){var t=V.setDefaultWallet(e.address);return t?e.address==this.current_wallet.address||(this.current_wallet=t,this.getBalance(),void this.loadTokens()):(A({title:"Failed to change wallet",icon:"error"}),!1)},getBalance(){new W.etherApi(this.network_list[this.global_network_index]).getBalance(this.current_wallet.address).then((e=>{console.log("balance:"+e),this.current_wallet.balance=void 0===e?"__":Number(e).toFixed(8),"ETH"==this.selected_asset.symbol&&(this.selected_asset.balance=this.current_wallet.balance)}),(e=>{}))},async getGasInfo(){let e=new W.etherApi(this.network_list[this.global_network_index]),t=await e.getGasAndTimeOracle();if(t){if(this.gas_priority=t,0==this.current_tab_index){this.gas_price=this.gas_priority[this.current_priority_index].max_fee,this.gas_limit=this.gas_priority[this.current_priority_index].gas,this.gas_fee=this.gas_priority[this.current_priority_index].cost,this.gas_fee_usd=this.gas_priority[this.current_priority_index].cost_usd;var s=T({duration:1e3,timingFunction:"ease"});s.opacity(.3).step().opacity(1).step(),this.gas_fee_item_animation=s.export()}return this.gas_priority}return!1},showGasPopup(){this.$refs.set_gas_popup.open("bottom")},closeGasPopup(){this.$refs.set_gas_popup.close()},showConfirmPaymentPopup(){this.$refs.confirm_payment_popup.open("bottom")},closeConfirmPaymentPopup(){this.$refs.confirm_payment_popup.close()},formSubmit(e){var t={};t.to_address=e.detail.value.to_address,t.amount=e.detail.value.amount,t.gas_price=this.gas_price,t.gas=this.gas_limit;return X.check(t,[{name:"to_address",checkType:"notnull",checkRule:"",errorMsg:"Please enter wallet address"},{name:"to_address",checkType:"reg",checkRule:"^0x[0-9a-fA-F]{40}$",errorMsg:"Incorrect wallet address"},{name:"amount",checkType:"notnull",checkRule:"",errorMsg:"Please enter amount"},{name:"amount",checkType:"number",checkRule:"1,20",errorMsg:"Please enter a amount"},{name:"gas_price",checkType:"notnull",checkRule:"",errorMsg:"Please set gas price"},{name:"gas",checkType:"notnull",checkRule:"",errorMsg:"Please set gas limit"}])?(t.eth_amount=e.detail.value.amount,t.gas_price=L(t.gas_price,"gwei"),t.amount=Y(t.amount),t.gas_fee=Number(U(BigInt(t.gas_price)*BigInt(t.gas))).toFixed(8),this.transfer_data=t,this.transfer_data.contract_info=null,"ETH"!=this.selected_asset.symbol&&(this.transfer_data.contract_info=this.selected_asset,this.transfer_data.amount=L(e.detail.value.amount,this.selected_asset.decimal)),console.log(this.transfer_data),this.showConfirmPaymentPopup(),this.transfer_data):(A({title:X.error,icon:"none"}),!1)},async sendTransaction(e){if(!e)return!1;let t=await V.getPrivateKey(this.current_wallet.address,e);if(void 0===t.privateKey)return A({title:"Failed to decrypt wallet , please try again",icon:"error"}),!1;C({title:"Sending transcation..."});let s=new W.etherApi(this.network_list[this.global_network_index]);var a=await s.transfer(this.current_wallet.address,this.transfer_data.to_address,this.transfer_data.amount,t.privateKey,this.transfer_data.gas_price,this.transfer_data.gas,this.transfer_data.contract_info);if(I(),!a.ret)return x({title:a.msg,showCancel:!1,confirmText:"Got it"}),!1;let l={};return l.type=a.data.type,l.txreceipt_status=0,l.tx_status=1==l.txreceipt_status?"Successful":"Pending",l.block_number=a.data.blockNumber,l.timestamp=(new Date).getTime(),l.humanize_time=Q.dateUtils.formtTimastamp(l.timestamp),l.hash=a.data.hash,l.block_hash=a.data.blockHash,l.from=a.data.from,l.to=a.data.to,l.value=a.data.value.toString(),l.eth_num=Number(U(BigInt(l.value))).toFixed(6),l.gas=a.data.gasLimit.toString(),l.gas_used=null,l.gas_price=this.transfer_data.gas_price.toString(),l.confirmations=null,l.humanize_confirm=null,l.data=a.data.data,K.saveTx(l),E("home_notify",{title:"Transaction submitted,tap to check it",url:"/pages/transaction/processing?address="+l.from}),A({title:"Successfully sent the transcation",icon:"success",duration:2500}),P({url:"/pages/index/wallet"}),!0},onClickTabItem(e){this.current_tab_index!==e.currentIndex&&(this.current_tab_index=e.currentIndex),1==this.current_tab_index&&("_"==this.gas_priority[this.current_priority_index].max_fee&&(this.gas_priority[this.current_priority_index].max_fee="0"),this.customize_set_max_fee=this.gas_priority[this.current_priority_index].max_fee)},selectPriority(e){this.current_priority_index=e,"_"==this.gas_priority[this.current_priority_index].max_fee&&(this.gas_priority[this.current_priority_index].max_fee="0"),this.gas_price=this.gas_priority[this.current_priority_index].max_fee,this.gas_limit=this.gas_priority[this.current_priority_index].gas,this.gas_fee=this.gas_priority[this.current_priority_index].cost,this.gas_fee_usd=this.gas_priority[this.current_priority_index].cost_usd,this.closeGasPopup()},setCustomizeGas(e){var t=e.detail.value;X.check(t,[{name:"customize_set_max_fee",checkType:"notnull",checkRule:"",errorMsg:"Please enter max fee"},{name:"customize_set_max_fee",checkType:"number",checkRule:"1,20",errorMsg:"Please enter a valid max fee"},{name:"customize_max_priority_fee",checkType:"number",checkRule:"1,20",errorMsg:"Please enter a valid max priority fee"},{name:"customize_gas",checkType:"notnull",checkRule:"",errorMsg:"Please enter gas"},{name:"customize_gas",checkType:"number",checkRule:"1,20",errorMsg:"Please enter a valid gas"}])?(this.gas_price=(Number(e.detail.value.customize_set_max_fee)+Number(e.detail.value.customize_max_priority_fee)).toString(),this.gas_limit=this.customize_gas):A({title:X.error,icon:"none"})},showPinPopup(){this.closeConfirmPaymentPopup(),this.$refs.pin_popup.show()},verifyPinCode(e){let t=e.ret;t?(this.$refs.pin_popup.closePopup(),this.sendTransaction(t)):A({title:"PIN error",icon:"none"})},async loadTokens(){let e=q.getList();if(!Array.isArray(e))return!1;let t=new W.etherApi(this.current_network);for(let s of e){let e=await t.getContractAssetBalance(s.contract_address,s.abi,this.current_wallet.address,s.decimal);if(e){s.balance=Number(e).toFixed(8);let t=await O.getPrice(s.symbol+"USDT");if(!t)continue;s.usd_worth=(Number(s.balance)*Number(t)).toFixed(2)}else s.balance="__",s.usd_worth="__"}this.current_wallet.tokens=e,V.saveWallet(this.current_wallet)},showTokenChoose(){this.$refs.token_choose.show()},changeAsset(e){if("ETH"!=e.contract_address)for(let t of this.current_wallet.tokens)e.contract_address==t.contract_address&&(this.selected_asset=t);else this.selected_asset={symbol:"ETH",balance:this.current_wallet.balance}},toAddressBookPage(){G({url:"/pages/address-book/address-book"})}}},[["render",function(l,p,f,h,g,y){const b=u,x=m,k=j(e("wallet-list-popup"),D),v=M,A=j(e("choose-token"),te),T=j(e("uni-load-more"),oe),C=R,I=z,E=j(e("uni-segmented-control"),ie),P=j(e("uni-popup"),F),G=j(e("pin-popup"),H);return t(),s(b,{class:"container"},{default:a((()=>[o(I,{onSubmit:y.formSubmit},{default:a((()=>[o(b,{class:"form-item"},{default:a((()=>[o(b,{class:"form-item-title font-desc-black"},{default:a((()=>[i("From")])),_:1}),o(k,{ref:"wallet_list_pop",pop_title:"Choose account",wallet_list:g.wallet_list,selected_address:g.current_wallet.address,show_setup_btn:!1,onChange:y.changeWallet},{default:a((()=>[o(b,{class:"transfer-form-item from-address-selector",onClick:y.showWalletListPop},{default:a((()=>[o(b,{class:"from-address-info"},{default:a((()=>[o(b,{class:"from-address-name font-desc-gray"},{default:a((()=>[i(n(g.current_wallet.name),1)])),_:1}),o(b,{class:"from-address font-desc-black"},{default:a((()=>[i(n(g.current_wallet.address),1)])),_:1})])),_:1}),o(x,{class:"form-icon",src:$})])),_:1},8,["onClick"])])),_:1},8,["wallet_list","selected_address","onChange"])])),_:1}),o(b,{class:"form-item"},{default:a((()=>[o(b,{class:"form-item-title font-desc-black"},{default:a((()=>[i("To")])),_:1}),o(b,{class:"transfer-form-item to-address"},{default:a((()=>[o(v,{class:"to-address-input",type:"text",name:"to_address",modelValue:g.to_address,"onUpdate:modelValue":p[0]||(p[0]=e=>g.to_address=e)},null,8,["modelValue"]),o(b,{class:"to-address-func-list flex-row-center-center"},{default:a((()=>[o(x,{class:"form-icon",src:"/assets/contact.529ed160.png",onClick:y.toAddressBookPage},null,8,["onClick"]),o(x,{class:"form-icon",src:ee})])),_:1})])),_:1})])),_:1}),o(b,{class:"form-item"},{default:a((()=>[o(b,{class:"form-item-title font-desc-black"},{default:a((()=>[i("Asset")])),_:1}),o(A,{ref:"token_choose",pop_title:"Select Asset",wallet:g.current_wallet,init_select:"ETH",onChange:y.changeAsset},{default:a((()=>[o(b,{class:"transfer-form-item asset-selector",onClick:y.showTokenChoose},{default:a((()=>["ETH"==g.selected_asset.symbol?(t(),s(b,{key:0,class:"asset-info"},{default:a((()=>[o(x,{class:"asset-icon",src:S}),o(b,{class:"asset-name font-desc-black"},{default:a((()=>[i(n(g.selected_asset.symbol),1)])),_:1})])),_:1})):(t(),s(b,{key:1,class:"asset-info"},{default:a((()=>[o(b,{class:"token-default-icon flex-row-center-center"},{default:a((()=>[i(n(g.selected_asset.symbol[0]),1)])),_:1}),o(b,{class:"asset-name font-third-title",style:{"margin-left":"10rpx"}},{default:a((()=>[i(n(g.selected_asset.symbol),1)])),_:1})])),_:1})),o(x,{class:"form-icon",src:$})])),_:1},8,["onClick"])])),_:1},8,["wallet","onChange"])])),_:1}),o(b,{class:"form-item"},{default:a((()=>[o(b,{class:"form-item-title font-desc-black flex-row-space-between-center"},{default:a((()=>[o(b,null,{default:a((()=>[i("Amount")])),_:1}),o(b,{class:"balance font-desc-gray-little",style:{"font-weight":"500"}},{default:a((()=>[i("Balance : "+n(g.selected_asset.balance)+n(g.selected_asset.symbol),1)])),_:1})])),_:1}),o(b,{class:"transfer-form-item amount-input-part"},{default:a((()=>[o(v,{class:"amount-input",type:"digit",name:"amount"}),o(b,{class:"amount-input-right"},{default:a((()=>[o(b,{class:"font-desc-gray"},{default:a((()=>[i(n(g.selected_asset.symbol),1)])),_:1})])),_:1})])),_:1})])),_:1}),o(b,{class:"form-item"},{default:a((()=>[o(b,{class:"form-item-title font-desc-black flex-row-space-between-center"},{default:a((()=>[o(b,null,{default:a((()=>[i("Gas Fee (Estimated)")])),_:1}),o(b,{class:"font-desc-gray-little",style:{"font-weight":"500"}},{default:a((()=>[o(T,{status:g.gas_estimate_status,contentText:g.gas_status_tip,iconSize:18},null,8,["status","contentText"])])),_:1})])),_:1}),o(b,{class:"transfer-form-item gas-fee-selector",onClick:y.showGasPopup,animation:g.gas_fee_item_animation},{default:a((()=>[o(b,{class:"gas-fee-left"},{default:a((()=>[o(b,{class:"gas-fee-usd-worth font-desc-black"},{default:a((()=>[i("$ "+n(g.gas_priority[g.current_priority_index].cost_usd),1)])),_:1}),o(b,{class:"gas-fee-asset-worth font-desc-gray"},{default:a((()=>[i(n(g.gas_priority[g.current_priority_index].cost)+" ETH",1)])),_:1})])),_:1}),o(b,{class:"gas-fee-right"},{default:a((()=>[o(b,{class:"estimated-time font-desc-black"},{default:a((()=>[i(n(g.gas_priority[g.current_priority_index].time),1)])),_:1}),o(x,{class:"form-icon",src:$})])),_:1})])),_:1},8,["onClick","animation"])])),_:1}),o(b,{class:"next-btn"},{default:a((()=>[o(C,{"form-type":"submit",class:"form-btn",type:"primary"},{default:a((()=>[i("Next")])),_:1})])),_:1})])),_:1},8,["onSubmit"]),o(b,null,{default:a((()=>[o(P,{ref:"set_gas_popup"},{default:a((()=>[o(b,{class:"popup-container"},{default:a((()=>[o(b,{class:"popup-top-area"},{default:a((()=>[o(b),o(b,{class:"popup-title-area font-second-title"},{default:a((()=>[i("Set Gas Fee")])),_:1}),o(x,{class:"popup-close-area",src:J,onClick:y.closeGasPopup},null,8,["onClick"])])),_:1}),o(b,{class:"popup-content-area"},{default:a((()=>[o(b,{class:"gas-fee-overview"},{default:a((()=>[o(b,{class:"gas-fee-overview-line"},{default:a((()=>[o(b,{class:"font-third-title"},{default:a((()=>[i("Gas Fee")])),_:1}),o(b,{class:"font-third-title",style:{"margin-top":"10rpx"},animation:g.gas_fee_item_animation},{default:a((()=>[i("$ "+n(g.gas_fee_usd),1)])),_:1},8,["animation"])])),_:1}),o(b,{class:"gas-fee-overview-line"},{default:a((()=>[o(b),o(b,{class:"font-desc-gray",animation:g.gas_fee_item_animation},{default:a((()=>[i(n(g.gas_fee)+" ETH",1)])),_:1},8,["animation"])])),_:1})])),_:1}),o(b,{class:"tab-swiper"},{default:a((()=>[o(b,null,{default:a((()=>[o(E,{current:g.current_tab_index,values:g.tab_list,"style-type":"button","active-color":"#1196db",onClickItem:y.onClickTabItem},null,8,["current","values","onClickItem"])])),_:1})])),_:1}),o(b,{class:"tab-content"},{default:a((()=>[0==g.current_tab_index?(t(),s(b,{key:0,class:"tab-content-set-priority",animation:g.gas_fee_item_animation},{default:a((()=>[(t(!0),c(d,null,_(g.gas_priority,((e,l)=>(t(),s(b,{class:w(["priority-item flex-row-start-center",[2==l?"last-priority-item":""]]),onClick:e=>y.selectPriority(l)},{default:a((()=>[o(b,{class:"priority-item-radio"},{default:a((()=>[o(b,{class:"radio-border flex-row-center-center"},{default:a((()=>[o(b,{class:w([g.current_priority_index==l?"priority-item-radio-active":"priority-item-radio-inactive"])},null,8,["class"])])),_:2},1024)])),_:2},1024),o(b,{class:"priority-item-detail"},{default:a((()=>[o(b,{class:"flex-row-space-between-center"},{default:a((()=>[o(b,{class:"font-desc-black"},{default:a((()=>[i(n(e.level),1)])),_:2},1024),o(b,{class:"font-desc-gray-little"},{default:a((()=>[i(n(e.time),1)])),_:2},1024)])),_:2},1024),o(b,{class:"font-desc-gray-little"},{default:a((()=>[i("MaxFee: "+n(e.max_fee)+" GWEI",1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),256)),o(T,{status:g.gas_estimate_status,contentText:g.gas_status_tip,iconSize:18},null,8,["status","contentText"])])),_:1},8,["animation"])):r("",!0),1==g.current_tab_index?(t(),s(b,{key:1,class:"tab-content-customize"},{default:a((()=>[o(I,{onSubmit:y.setCustomizeGas},{default:a((()=>[o(b,{class:"customize-gas-item"},{default:a((()=>[o(b,{class:"font-desc-gray"},{default:a((()=>[i("MaxFee")])),_:1}),o(b,{class:"customize-gas-item-input flex-row-space-between-center"},{default:a((()=>[o(v,{type:"digit",value:g.customize_set_max_fee,name:"customize_set_max_fee"},null,8,["value"]),o(b,{class:"font-desc-gray"},{default:a((()=>[i("GWEI")])),_:1})])),_:1})])),_:1}),o(b,{class:"customize-gas-item"},{default:a((()=>[o(b,{class:"font-desc-gray"},{default:a((()=>[i("MaxPriorityFee")])),_:1}),o(b,{class:"customize-gas-item-input flex-row-space-between-center"},{default:a((()=>[o(v,{type:"digit",value:g.customize_max_priority_fee,name:"customize_max_priority_fee"},null,8,["value"]),o(b,{class:"font-desc-gray"},{default:a((()=>[i("GWEI")])),_:1})])),_:1})])),_:1}),o(b,{class:"customize-gas-item"},{default:a((()=>[o(b,{class:"font-desc-gray"},{default:a((()=>[i("Gas")])),_:1}),o(b,{class:"customize-gas-item-input"},{default:a((()=>[o(v,{type:"digit",value:g.customize_gas,name:"customize_gas"},null,8,["value"])])),_:1})])),_:1}),o(b,{style:{"margin-top":"40rpx"}},{default:a((()=>[o(C,{"form-type":"submit",class:"form-btn",type:"primary"},{default:a((()=>[i("Set")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})):r("",!0)])),_:1})])),_:1})])),_:1})])),_:1},512),o(P,{ref:"confirm_payment_popup"},{default:a((()=>[o(b,{class:"popup-container"},{default:a((()=>[o(b,{class:"popup-top-area"},{default:a((()=>[o(b),o(b,{class:"popup-title-area font-second-title"},{default:a((()=>[i("Payment Detail")])),_:1}),o(x,{class:"popup-close-area",src:J,onClick:y.closeConfirmPaymentPopup},null,8,["onClick"])])),_:1}),o(b,{class:"popup-content-area"},{default:a((()=>[o(b,{class:"payment-amount flex-row-center-center"},{default:a((()=>[o(b,{class:"font-second-title"},{default:a((()=>[i(n(g.transfer_data.eth_amount)+" "+n(g.selected_asset.symbol),1)])),_:1})])),_:1}),o(b,{class:"payment-item flex-row-start-start payment-item-border"},{default:a((()=>[o(b,{class:"payment-title font-desc-gray-little"},{default:a((()=>[i("Payment type")])),_:1}),o(b,{class:"payment-content font-desc-black-little"},{default:a((()=>[i(n(g.selected_asset.symbol)+" Transfer",1)])),_:1})])),_:1}),o(b,{class:"payment-item flex-row-start-start payment-item-border"},{default:a((()=>[o(b,{class:"payment-title font-desc-gray-little"},{default:a((()=>[i("To")])),_:1}),o(b,{class:"payment-content font-desc-black-little"},{default:a((()=>[i(n(g.transfer_data.to_address),1)])),_:1})])),_:1}),o(b,{class:"payment-item flex-row-start-start payment-item-border"},{default:a((()=>[o(b,{class:"payment-title font-desc-gray-little"},{default:a((()=>[i("From")])),_:1}),o(b,{class:"payment-content font-desc-black-little"},{default:a((()=>[i(n(g.current_wallet.address),1)])),_:1})])),_:1}),o(b,{class:"payment-item flex-row-start-start"},{default:a((()=>[o(b,{class:"payment-title font-desc-gray-little"},{default:a((()=>[i("Gas Fee")])),_:1}),o(b,{class:"payment-content font-desc-black-little"},{default:a((()=>[i(n(g.transfer_data.gas_fee)+" ETH",1)])),_:1})])),_:1}),o(b,{style:{"margin-top":"40rpx"}},{default:a((()=>[o(C,{class:"form-btn",type:"primary",onClick:y.showPinPopup},{default:a((()=>[i("Next")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},512),o(G,{ref:"pin_popup",pop_title:"Please enter PIN",onVerifyRet:y.verifyPinCode},null,8,["onVerifyRet"])])),_:1})])),_:1})}],["__scopeId","data-v-c96fd260"]]);export{ne as default};
