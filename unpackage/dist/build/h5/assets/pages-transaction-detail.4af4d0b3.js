import{a as t,s as a,X as s,a5 as e,o as n,c as r,w as i,i as l,b as o,S as c,d,t as f,v as _,e as u,u as h}from"./index.e3856387.js";import{A as g}from"./app.39bb0535.js";import{E as k,I as m,f as x}from"./etherApi.29d22b7c.js";import{T as b}from"./transaction.87575691.js";import{T as p}from"./token.bb23f639.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import"./config.d9a5f6eb.js";import"./wallet.f064e6a3.js";const y=w({data:()=>({network_list:t().globalData.global_network_list,global_network_index:t().globalData.global_network_index,current_network:{network:"__",url:"",color:"#f6f6f6",etherscan_api:""},tx_hash:"",address:"",transaction:{from:"",to:""},transfer_contract_token:!1}),onLoad(t){if(!g.checkAppInit())return;if(this.current_network=this.network_list[this.global_network_index],!t.tx_hash||!t.address)return a({title:"Data exception",icon:"error"}),void s();this.tx_hash=t.tx_hash,this.address=t.address;let e=b.getTx(this.tx_hash);e&&(this.transaction=e),this.getTransaction(this.tx_hash)},onPullDownRefresh(){this.getTransaction(this.tx_hash),setTimeout((function(){e()}),1e3)},methods:{getTransaction:async function(t){let s=new k.etherApi(this.network_list[this.global_network_index]),e=await s.getTransaction(t);if(!e)return a({title:"Can't find the transaction",icon:"none"}),!1;if(2==e.type){let t=p.getToken(e.to);if(t){const a=new m(t.abi).parseTransaction({data:e.data,value:e.value});console.dir(a),this.transaction.data=a,this.transaction.contract_info=t,"transfer"==this.transaction.data.name&&(this.transfer_contract_token=!0)}}let n=await s.getTransactionReceipt(t);return n?(n&&n.status?1==n.status?this.transaction.tx_status="Successful":this.transaction.tx_status="Confirming":this.transaction.tx_status="Unkonwn",this.transaction.time="",this.transaction.from=n.from,this.transaction.to=n.to,this.transaction.value=e.value,this.transaction.eth_num=Number(x(e.value)).toFixed(8),this.transaction.gas_used=n.gasUsed,this.transaction.gas_price=n.gasPrice,this.transaction.gas_fee=Number(x(this.transaction.gas_used*this.transaction.gas_price)).toFixed(8),this.transaction.tx_hash=n.hash,this.transaction.block_hash=n.blockHash,this.transaction.block_number=n.blockNumber,this.transaction):(this.transaction.tx_status="Pending",this.transaction.time="",this.transaction.from=e.from,this.transaction.to=e.to,this.transaction.value=e.value,this.transaction.eth_num=Number(x(e.value)).toFixed(8),this.transaction.gas_limit=e.gasLimit,this.transaction.gas_price=e.gasPrice,this.transaction.estimate_gas_fee=Number(x(this.transaction.gas_limit*this.transaction.gas_price)).toFixed(8),this.transaction.tx_hash=e.hash,this.transaction.block_hash=e.blockHash,this.transaction.block_number=e.blockNumber,this.transaction)}}},[["render",function(t,a,s,e,g,k){const m=u,x=l,b=h;return n(),r(x,{class:"container"},{default:i((()=>[o(x,{class:"tx-status-area flex-column-start-center"},{default:i((()=>[o(m,{class:"status-icon",src:"/static/img/"+g.transaction.tx_status+".png"},null,8,["src"]),o(x,{class:c(["status-text font-third-title",["tx-status-"+g.transaction.tx_status]])},{default:i((()=>[d(f(g.transaction.tx_status),1)])),_:1},8,["class"]),o(x,{class:"tx-time"})])),_:1}),o(x,{class:"detail-part detail-part1"},{default:i((()=>[o(x,{class:"detail-line flex-row-start-start detail-line-border"},{default:i((()=>[o(x,{class:"line-title font-desc-black"},{default:i((()=>[d("Detail")])),_:1}),o(x,{class:"line-content"},{default:i((()=>[0==g.transfer_contract_token?(n(),r(x,{key:0,class:"font-desc-black"},{default:i((()=>[g.address.toLowerCase()==g.transaction.from.toLowerCase()?(n(),r(b,{key:0,style:{"margin-right":"30rpx"}},{default:i((()=>[d("Send")])),_:1})):g.address.toLowerCase()==g.transaction.to.toLowerCase()?(n(),r(b,{key:1,style:{"margin-right":"30rpx"}},{default:i((()=>[d("Receive")])),_:1})):(n(),r(b,{key:2,style:{"margin-right":"30rpx"}})),o(b,{style:{"font-weight":"550"}},{default:i((()=>[d(f(g.transaction.eth_num)+" ETH",1)])),_:1})])),_:1})):_("",!0),g.transfer_contract_token?(n(),r(x,{key:1,class:"font-desc-black"},{default:i((()=>[g.address.toLowerCase()==g.transaction.from.toLowerCase()?(n(),r(b,{key:0,style:{"margin-right":"30rpx"}},{default:i((()=>[d("Send")])),_:1})):g.address.toLowerCase()==g.transaction.data.args[0].toLowerCase()?(n(),r(b,{key:1,style:{"margin-right":"30rpx"}},{default:i((()=>[d("Receive")])),_:1})):(n(),r(b,{key:2,style:{"margin-right":"30rpx"}})),o(b,{style:{"font-weight":"550"}},{default:i((()=>[d(f(g.transaction.data.args[1])+" "+f(g.transaction.contract_info.symbol),1)])),_:1})])),_:1})):_("",!0),o(x,{class:"font-desc-gray-little",style:{"margin-top":"15rpx"}},{default:i((()=>[d(f(g.current_network.network),1)])),_:1})])),_:1})])),_:1}),o(x,{class:"detail-line flex-row-start-start"},{default:i((()=>["Successful"==g.transaction.tx_status?(n(),r(x,{key:0,class:"line-title font-desc-black"},{default:i((()=>[d("Gas Fee")])),_:1})):(n(),r(x,{key:1,class:"line-title"},{default:i((()=>[d("Estimated Fee")])),_:1})),o(x,{class:"line-content"},{default:i((()=>["Successful"==g.transaction.tx_status?(n(),r(x,{key:0,class:"font-desc-black"},{default:i((()=>[d(f(g.transaction.gas_fee)+" ETH",1)])),_:1})):(n(),r(x,{key:1,class:"font-desc-black"},{default:i((()=>[d(f(g.transaction.estimate_gas_fee)+" ETH",1)])),_:1}))])),_:1})])),_:1})])),_:1}),o(x,{class:"detail-part detail-part2"},{default:i((()=>[o(x,{class:"detail-line flex-row-start-start detail-line-border"},{default:i((()=>[o(x,{class:"line-title fonr"},{default:i((()=>[d("From")])),_:1}),o(x,{class:"line-content"},{default:i((()=>[o(x,{class:"font-desc-gray"},{default:i((()=>[d(f(g.transaction.from),1)])),_:1})])),_:1})])),_:1}),o(x,{class:"detail-line flex-row-start-start"},{default:i((()=>[o(x,{class:"line-title font-desc-black"},{default:i((()=>[d("To")])),_:1}),o(x,{class:"line-content"},{default:i((()=>[o(x,{class:"font-desc-gray"},{default:i((()=>[d(f(g.transaction.to),1)])),_:1}),g.transfer_contract_token?(n(),r(x,{key:0,class:"font-desc-gray-little",style:{"margin-top":"5rpx"}},{default:i((()=>[d("contract address")])),_:1})):_("",!0)])),_:1})])),_:1}),g.transfer_contract_token?(n(),r(x,{key:0,class:"detail-line flex-row-start-start"},{default:i((()=>[o(x,{class:"line-title font-desc-black"},{default:i((()=>[d("Target")])),_:1}),o(x,{class:"line-content"},{default:i((()=>[o(x,{class:"font-desc-gray"},{default:i((()=>[d(f(g.transaction.data.args[0]),1)])),_:1})])),_:1})])),_:1})):_("",!0)])),_:1}),o(x,{class:"detail-part detail-part3"},{default:i((()=>[o(x,{class:"detail-line flex-row-start-start detail-line-border"},{default:i((()=>[o(x,{class:"line-title font-desc-black"},{default:i((()=>[d("TxHash")])),_:1}),o(x,{class:"line-content"},{default:i((()=>[o(x,{class:"font-desc-gray"},{default:i((()=>[d(f(g.transaction.tx_hash),1)])),_:1})])),_:1})])),_:1}),o(x,{class:"detail-line flex-row-start-start detail-line-border"},{default:i((()=>[o(x,{class:"line-title font-desc-black"},{default:i((()=>[d("Block Hash")])),_:1}),o(x,{class:"line-content"},{default:i((()=>[o(x,{class:"font-desc-gray"},{default:i((()=>[d(f(g.transaction.block_hash),1)])),_:1})])),_:1})])),_:1}),o(x,{class:"detail-line flex-row-start-start"},{default:i((()=>[o(x,{class:"line-title font-desc-black"},{default:i((()=>[d("Block Number")])),_:1}),o(x,{class:"line-content"},{default:i((()=>[o(x,{class:"font-desc-gray"},{default:i((()=>[d(f(g.transaction.block_number),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-e38327eb"]]);export{y as default};
