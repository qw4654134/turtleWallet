import{g as t,f as e,s as r}from"./index.0a4c0685.js";const i={tx_list_key:"storage_tx_list",getTxList:function(e=""){try{var r=t(this.tx_list_key);if(!r)return[];var i=JSON.parse(r);if(!i)return!1;if(""==e)return i;let s=[];for(let t of i)String(t.from).toLowerCase()!=String(e).toLowerCase()&&String(t.to).toLowerCase()!=String(e).toLowerCase()||s.push(t);return s}catch(s){return!1}},getProcessingTxList:function(t=""){let e=this.getTxList(t),r=[];if(!e)return!1;for(let i of e)1!=i.txreceipt_status&&r.push(i);return r},saveTx:function(t){var i=this.getTxList();if(i||(i=[]),!t)return!1;"bigint"==typeof t.value&&(t.value=t.value.toString()),"bigint"==typeof t.gas&&(t.gas=t.gas.toString()),"bigint"==typeof t.gas_used&&(t.gas_used=t.gas_used.toString()),"bigint"==typeof t.gas_price&&(t.gas_price=t.gas_price.toString());for(var s=0;s<i.length;s++)if(i[s].hash==t.hash){i.splice(s,1);break}i.push(t);try{return e(this.tx_list_key,JSON.stringify(i)),console.log("已存储账单:"+t.hash),!0}catch(n){return console.log(n),r({title:"failed to save transaction"}),!1}},getTx:function(t){var e=this.getTxList();if(!e)return!1;for(let r of e)if(t==r.hash)return r;return!1},delTx:function(t){var r=this.getTxList();if(!r)return!1;for(var i=0;i<r.length;i++)if(r[i].hash==t){r.splice(i,1),e(this.tx_list_key,JSON.stringify(r));break}return!0}};export{i as T};
